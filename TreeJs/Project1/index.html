<!DOCTYPE html>
<html>
	<head>
		<title> Project 1 Tree js</title>
		<meta content="text/html" http-equiv="content-type" />
		<script src="../source/three.js"></script>
		<script src="js/curves.js"></script>
		<script src="js/escena.js"></script>
		<script src="js/caja.js"></script>
		<script>
			
			var render; 
			var escena;
			var canvasWidth = 1300;
			var canvasHeight = 650;

			function initScene(){
				render = new THREE.WebGLRenderer();
				render.setClearColor(0xFFFFFF, 1);
				render.setSize(canvasWidth,canvasHeight);
				document.getElementById("canvas").appendChild(render.domElement);

				escena = new Escena(render,canvasWidth,canvasHeight);
				
				var puntos = [[0,0],[-7,-3],[0,-7],[5,-9]];
				var pControl = [1/3,2/3];
				var length = 1/300;

				//result = CURVES.InterpolationCurve(puntos,pControl,length);
			    //result = CURVES.HermiteCurve(puntos,length);
				result = CURVES.BezierCurve(puntos,length);
			    
			}

			
			function animarEscena(){

				var length = result.length;
				var tiempo = (Date.now() - lastTime)/1000;//Divido porque esta en miliseg y lo quiero en segundos
				if(tiempo > 0){
					escena.animarCamara(result);
					escena.renderScene();
				}
				lastTime=Date.now();
    			setTimeout(animarEscena,1000/80) //1.6 60 frames por segundo
			}

			function initWebGl()
			{
				initScene();
				//renderScene();
				lastTime = Date.now();
				animarEscena();
			}
		</script>
	</head>
	<body onload="initWebGl()">
		<div id="canvas"></div>
	</body>
</html>